sudo: required

language: java

jdk: oraclejdk8

services:
  - docker

addons:
  apt:
    packages:
      - oracle-java8-installer

install: true

cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

script: ./gradlew build bintrayUpload

after_success:
  - bash <(curl -s https://codecov.io/bash)
  - docker --version  # document the version travis is using
  - docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
  - docker build -t soen387fall2016/erm-dataservice:latest .
  - docker push soen387fall2016/erm-dataservice:latest
